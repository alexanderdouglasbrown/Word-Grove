{"version":3,"sources":["UserContext.js","hooks/useStandardError.js","components/PostBox.js","components/Like.js","components/Post.js","components/CommentPostBox.js","components/Comment.js","components/ExpandedPost.js","components/PostModal.js","pages/Home.js","pages/PostPage.js","pages/Profile.js","pages/Settings.js","pages/Register.js","pages/Login.js","pages/Logout.js","pages/Error404.js","components/NavBar.js","components/WaitOnWake.js","App.js","serviceWorker.js","index.js"],"names":["UserContext","createContext","UserProvider","props","useState","isLoggedIn","setIsLoggedIn","username","setUsername","userID","setUserID","access","setAccess","window","localStorage","getItem","token","setToken","clearUser","removeItem","axios","defaults","headers","common","useEffect","decodedToken","jwt_decode","exp","Date","now","Number","setItem","Provider","value","children","useStandardError","useCallback","err","isCancel","toast","error","response","data","PostBox","maxCharacters","standardError","inputText","setInputText","characterCounter","setCharacterCounter","className","style","margin","required","onChange","e","text","target","length","substr","placeholder","disabled","onClick","post","Post","then","refreshPosts","catch","marginTop","float","color","Likes","useContext","userData","postID","totalLikes","isUserLiked","refresh","deleteLike","delete","PostID","addLike","put","display","justifyContent","alignItems","width","cursor","icon","faSolidHeart","faHeart","info","marginLeft","fontWeight","history","useHistory","isExpanded","isProfile","expandPost","refreshIndex","setRefreshIndex","closeModal","postData","setPostData","setTotalLikes","setIsUserLiked","totalComments","setTotalComments","isEditMode","setIsEditMode","editInput","setEditInput","isPostDeleted","setIsPostDeleted","expandPostClicked","tagName","toLowerCase","refreshPost","get","params","ID","res","cancelEdit","overflowX","position","top","right","fontSize","patch","onEdit","confirm","onDelete","left","whiteSpace","padding","date","isEdited","push","Like","max","CommentPostBox","refreshComments","Comment","String","commentID","commentData","setCommentData","refreshComment","CommentID","comment","ExpandedPost","onPostDelete","commentIDs","setCommentIDs","paddingLeft","map","Modal","setAppElement","PostModal","isOpen","onRequestClose","content","maxWidth","bottom","overlay","zIndex","backgroundColor","Home","postIDs","setPostIDs","isPostModalVisible","setIsPostModalVisible","selectedPostID","setSelectedPostID","getPostIDs","useRef","isFetching","current","LastID","getMorePosts","posts","lastID","finally","openPostModal","pushState","handleScroll","innerHeight","document","documentElement","scrollTop","offsetHeight","addEventListener","removeEventListener","noScroll","on","off","PostPage","useParams","Profile","profileData","setProfileData","UserID","Username","textAlign","Settings","currentPassword","setCurrentPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","isCurrentPasswordVisible","setIsCurrentPasswordVisible","isNewPasswordVisible","setIsNewPasswordVisible","isConfirmPasswordVisible","setIsConfirmPasswordVisible","onSubmit","preventDefault","Current","New","Confirm","htmlFor","name","type","faEye","faEyeSlash","Register","isPasswordVisible","setIsPasswordVisible","password","setPassword","to","jwt","autoFocus","faUser","faLock","Login","Logout","Error404","NavBar","isUsernameDropdownActive","setIsUsernameDropdownActive","handleClick","marginBottom","role","aria-label","aria-expanded","aria-hidden","id","WaitOnWake","isVisible","setIsVisible","setIsServerAwake","setTimeout","pingServer","configure","hideProgressBar","newestOnTop","autoClose","App","isServerAwake","path","exact","component","Boolean","location","hostname","match","baseURL","process","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.f596dfb9.chunk.js","sourcesContent":["import React, { createContext, useState, useEffect } from 'react'\r\nimport jwt_decode from 'jwt-decode'\r\nimport axios from 'axios'\r\n\r\nconst UserContext = createContext()\r\n\r\nexport const UserProvider = props => {\r\n    const [isLoggedIn, setIsLoggedIn] = useState(false)\r\n    const [username, setUsername] = useState(\"\")\r\n    const [userID, setUserID] = useState(null)\r\n    const [access, setAccess] = useState(\"User\")\r\n    const [token, setToken] = useState(window.localStorage.getItem('token'))\r\n\r\n    const clearUser = () => {\r\n        setIsLoggedIn(false)\r\n        setUsername(\"\")\r\n        setUserID(null)\r\n        setAccess(\"User\")\r\n        setToken(null)\r\n\r\n        window.localStorage.removeItem('token')\r\n        axios.defaults.headers.common['Authorization'] = null;\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (token) {\r\n            const decodedToken = jwt_decode(token)\r\n            if (decodedToken.exp > (Date.now() / 1000)) {\r\n                axios.defaults.headers.common['Authorization'] = token;\r\n\r\n                setIsLoggedIn(true)\r\n                setUsername(decodedToken[\"Username\"])\r\n                setUserID(Number(decodedToken[\"UserID\"]))\r\n                setAccess(decodedToken[\"http://schemas.microsoft.com/ws/2008/06/identity/claims/role\"])\r\n\r\n                if (window.localStorage.getItem('token') !== token)\r\n                    window.localStorage.setItem('token', token)\r\n            } else {\r\n                clearUser()\r\n            }\r\n        } else {\r\n            clearUser()\r\n        }\r\n    }, [token])\r\n\r\n    return (<UserContext.Provider value={[{\r\n        isLoggedIn,\r\n        username,\r\n        userID,\r\n        access,\r\n        token\r\n    },\r\n        setToken]}>\r\n        {props.children}\r\n    </UserContext.Provider>)\r\n\r\n}\r\n\r\nexport default UserContext","import { useCallback } from 'react'\r\nimport axios from 'axios'\r\nimport { toast } from 'react-toastify'\r\n\r\nconst useStandardError = props => {\r\n\r\n    const standardError = useCallback(err => {\r\n        if (!axios.isCancel(err))\r\n            toast.error(err && err.response && err.response.data && err.response.data.error ? err.response.data.error : \"Sorry, an error occurred\")\r\n    }, [])\r\n\r\n    return standardError\r\n}\r\n\r\nexport default useStandardError","import React, { useState } from 'react'\r\nimport axios from 'axios'\r\n\r\nimport useStandardError from '../hooks/useStandardError'\r\n\r\nconst PostBox = props => {\r\n    const maxCharacters = 512\r\n\r\n    const standardError = useStandardError()\r\n    const [inputText, setInputText] = useState(\"\")\r\n    const [characterCounter, setCharacterCounter] = useState(maxCharacters)\r\n\r\n    const handleInput = e => {\r\n        let text = e.target.value\r\n\r\n        if (text.length > maxCharacters)\r\n            text = text.substr(0, maxCharacters)\r\n\r\n        setCharacterCounter(maxCharacters - text.length)\r\n        setInputText(text)\r\n    }\r\n\r\n    const handlePost = () => {\r\n        if (inputText)\r\n            axios.post(`/api/home/post`, { Post: inputText })\r\n                .then(() => {\r\n                    setInputText(\"\")\r\n                    setCharacterCounter(maxCharacters)\r\n                    props.refreshPosts()\r\n                })\r\n                .catch(standardError)\r\n    }\r\n\r\n    return (\r\n        <div className=\"card\" style={{ margin: \"1rem auto\" }}>\r\n            <div className=\"card-content\">\r\n                <textarea required onChange={handleInput} className=\"textarea\" placeholder=\"Put your words on Word Hole\" value={inputText} />\r\n                <button disabled={!inputText} onClick={handlePost} className=\"button is-primary\" style={{ marginTop: \"0.5rem\" }}>Post</button>\r\n                <div style={{ float: \"right\", color: \"lightgray\" }} >Remaining characters: {characterCounter}</div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PostBox","import React, { useContext } from 'react'\r\nimport axios from 'axios'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faHeart as faSolidHeart } from '@fortawesome/free-solid-svg-icons'\r\nimport { faHeart } from '@fortawesome/free-regular-svg-icons'\r\nimport { toast } from 'react-toastify'\r\n\r\nimport useStandardError from '../hooks/useStandardError'\r\n\r\nimport UserContext from '../UserContext'\r\n\r\nconst Likes = props => {\r\n    const [userData] = useContext(UserContext)\r\n    const { postID, totalLikes, isUserLiked, refresh } = props\r\n    const standardError = useStandardError()\r\n\r\n    const toggleLike = () => {\r\n        if (!userData.isLoggedIn) {\r\n            toast.info(\"Please log in to Like posts\")\r\n            return\r\n        }\r\n\r\n        if (isUserLiked)\r\n            deleteLike()\r\n        else\r\n            addLike()\r\n    }\r\n\r\n    const deleteLike = () => {\r\n        axios.delete(`/api/likes`,\r\n            { data: { PostID: postID } })\r\n            .then(() => {\r\n                refresh()\r\n            })\r\n            .catch(standardError)\r\n    }\r\n\r\n    const addLike = () => {\r\n        axios.put(`/api/likes`, { PostID: postID })\r\n            .then(() => {\r\n                refresh()\r\n            })\r\n            .catch(standardError)\r\n    }\r\n\r\n    return <div style={{ display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\", width: \"1.5rem\" }}>\r\n        <FontAwesomeIcon style={{ marginTop: \"0.15rem\", color: \"fuchsia\", cursor: \"pointer\" }} icon={isUserLiked ? faSolidHeart : faHeart} onClick={toggleLike} />\r\n        <div style={{ marginLeft: \"0.25rem\", fontWeight: 600 }}>{`${totalLikes ? `(${totalLikes})` : \"\"}`}</div>\r\n    </div>\r\n}\r\n\r\nexport default Likes","import React, { useState, useEffect, useCallback, useContext } from 'react'\r\nimport Linkify from 'react-linkify'\r\nimport axios from 'axios'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nimport Like from '../components/Like'\r\n\r\nimport useStandardError from '../hooks/useStandardError'\r\n\r\nimport UserContext from '../UserContext'\r\n\r\nimport '../components/css/LinkButton.css'\r\n\r\nconst Post = props => {\r\n    const maxCharacters = 512\r\n\r\n    const history = useHistory()\r\n    const standardError = useStandardError()\r\n    const [userData] = useContext(UserContext)\r\n\r\n    const { postID, isExpanded, isProfile, expandPost, refreshIndex, setRefreshIndex, closeModal } = props\r\n    const [postData, setPostData] = useState(null)\r\n\r\n    const [totalLikes, setTotalLikes] = useState(null)\r\n    const [isUserLiked, setIsUserLiked] = useState(null)\r\n    const [totalComments, setTotalComments] = useState(null)\r\n\r\n    const [isEditMode, setIsEditMode] = useState(false)\r\n    const [editInput, setEditInput] = useState(\"\")\r\n    const [characterCounter, setCharacterCounter] = useState(maxCharacters)\r\n\r\n    const [isPostDeleted, setIsPostDeleted] = useState(false)\r\n\r\n    const chaseUserProfile = () => {\r\n        if (closeModal)\r\n            closeModal()\r\n\r\n        history.push(`/p/${postData.username}`)\r\n    }\r\n\r\n    const expandPostClicked = e => {\r\n        if (isEditMode || isExpanded)\r\n            return\r\n\r\n        if (e.target && e.target.tagName && e.target.tagName.toLowerCase() !== \"a\")\r\n            expandPost(postID)\r\n    }\r\n\r\n    const refreshPost = useCallback(() => {\r\n        if (postID === null)\r\n            return\r\n\r\n        axios.get(`/api/post`,\r\n            { params: { ID: Number(postID) } })\r\n            .then(res => {\r\n                setPostData(res.data.post)\r\n                setTotalLikes(res.data.totalLikes)\r\n                setTotalComments(res.data.totalComments)\r\n                setIsUserLiked(res.data.isUserLiked)\r\n            })\r\n            .catch(() => { })\r\n    }, [postID])\r\n\r\n    const handleInput = e => {\r\n        let text = e.target.value\r\n\r\n        if (text.length > maxCharacters)\r\n            text = text.substr(0, maxCharacters)\r\n\r\n        setCharacterCounter(maxCharacters - text.length)\r\n        setEditInput(text)\r\n    }\r\n\r\n    const startEdit = () => {\r\n        const text = postData && postData.post ? postData.post : \"\"\r\n        setEditInput(text)\r\n        setIsEditMode(true)\r\n        setCharacterCounter(maxCharacters - text.length)\r\n    }\r\n\r\n    const cancelEdit = () => {\r\n        setEditInput(\"\")\r\n        setIsEditMode(false)\r\n        setCharacterCounter(maxCharacters)\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (!postData && !isPostDeleted && postID !== null)\r\n            refreshPost()\r\n    }, [refreshPost, postData, isPostDeleted, postID])\r\n\r\n    useEffect(() => {\r\n        if (!isPostDeleted && refreshIndex === postID) {\r\n            refreshPost(true)\r\n            setRefreshIndex(null)\r\n        }\r\n    }, [refreshIndex, postID, refreshPost, setRefreshIndex, isPostDeleted])\r\n\r\n    const deletePost = () => {\r\n        if (window.confirm(\"Are you sure you would like to delete this post?\")) {\r\n            axios.delete(`/api/post`,\r\n                { data: { ID: Number(postID) } })\r\n                .then(() => {\r\n                    setIsPostDeleted(true)\r\n                    setPostData(null)\r\n\r\n                    if (props.onDelete)\r\n                        props.onDelete()\r\n                })\r\n                .catch(standardError)\r\n        }\r\n    }\r\n\r\n    const saveEdit = () => {\r\n        axios.patch(`/api/post`,\r\n            { ID: Number(postID), Post: editInput })\r\n            .then(() => {\r\n                cancelEdit()\r\n                refreshPost()\r\n\r\n                if (props.onEdit)\r\n                    props.onEdit()\r\n            })\r\n            .catch(standardError)\r\n    }\r\n\r\n    return <>\r\n        {postData ?\r\n            <div className=\"card\" style={{ margin: \"1rem auto\", overflowX: \"auto\" }}>\r\n                {(userData.userID === postData.userID || userData.access === \"Admin\") &&\r\n                    <div style={{ position: \"absolute\", top: \"0.25rem\", right: \"0.25rem\", fontSize: \"0.7rem\" }}>\r\n                        {isEditMode ?\r\n                            <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\r\n                                <div className=\"LinkButton\" onClick={cancelEdit}>Cancel</div>\r\n                                <div style={{ width: \"0.5rem\" }}></div>\r\n                                <div className=\"LinkButton\" onClick={saveEdit} style={{ fontWeight: 700 }}>Save</div>\r\n                            </div>\r\n                            :\r\n                            <div className=\"LinkButton\" onClick={startEdit}>Edit</div>\r\n                        }\r\n                    </div>\r\n                }\r\n                <div className=\"card-content\" style={{ cursor: `${isExpanded || isEditMode ? \"auto\" : \"pointer\"}` }} onClick={expandPostClicked}>\r\n                    {isEditMode ?\r\n                        <>\r\n                            <div className=\"LinkButton-Danger\" onClick={deletePost} style={{ position: \"absolute\", top: \"0.25rem\", left: \"0.25rem\", fontSize: \"0.7rem\" }}>Delete</div>\r\n                            <textarea onChange={handleInput} value={editInput} className=\"textarea\" />\r\n                            <div style={{ float: \"right\", color: \"lightgray\" }} >Remaining characters: {characterCounter}</div>\r\n                        </>\r\n                        :\r\n                        <>\r\n                            {isExpanded ?\r\n                                <div style={{ whiteSpace: \"pre-wrap\" }}>\r\n                                    <Linkify>{postData.post}</Linkify>\r\n                                </div>\r\n                                :\r\n                                <div style={{ whiteSpace: \"pre-wrap\" }}>\r\n                                    <Linkify>{postData.post}</Linkify>\r\n                                </div>\r\n                            }\r\n                        </>\r\n                    }\r\n                </div>\r\n                <div className=\"card-footer\" style={{ justifyContent: \"space-between\", fontSize: \"0.7rem\", color: \"gray\", padding: \"1rem\" }}>\r\n                    <div>\r\n                        <div>{`${postData.date}${postData.isEdited ? \" (Edited)\" : \"\"}`}</div>\r\n                        {isProfile ?\r\n                            <div>{`${postData.username}`}</div>\r\n                            :\r\n                            <div className=\"LinkButton\" onClick={chaseUserProfile}>{`${postData.username}`}</div>\r\n                        }\r\n                    </div>\r\n\r\n                    <div>\r\n                        <Like\r\n                            postID={postID}\r\n                            totalLikes={totalLikes}\r\n                            isUserLiked={isUserLiked}\r\n                            refresh={refreshPost}\r\n                        />\r\n                        {!isExpanded &&\r\n                            <div className=\"LinkButton\" style={{ width: \"5.5rem\" }} onClick={expandPostClicked}>{`Comments${totalComments && totalComments > 0 ? ` (${totalComments})` : \"\"}`}</div>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            :\r\n            <>\r\n                {isPostDeleted ?\r\n                    null\r\n                    :\r\n                    <div className=\"card\" style={{ margin: \"1rem auto\" }}>\r\n                        <div className=\"card-content\">\r\n                            <progress className=\"progress is-small is-light\" max=\"100\"></progress>\r\n                        </div>\r\n                    </div>\r\n                }\r\n            </>\r\n\r\n        }\r\n    </>\r\n}\r\n\r\nexport default Post","import React, { useState } from 'react'\r\nimport axios from 'axios'\r\n\r\nimport useStandardError from '../hooks/useStandardError'\r\n\r\nconst CommentPostBox = props => {\r\n    const { postID, refreshComments } = props\r\n    const standardError = useStandardError()\r\n\r\n    const [inputText, setInputText] = useState(\"\")\r\n\r\n    const handlePost = () => {\r\n        if (inputText && postID)\r\n            axios.post(`/api/comments`,\r\n                { Comment: String(inputText), PostID: Number(postID) })\r\n                .then(() => {\r\n                    setInputText(\"\")\r\n                    refreshComments()\r\n                })\r\n                .catch(standardError)\r\n    }\r\n\r\n    return <div className=\"card\" style={{ margin: \"1rem auto\" }}>\r\n        <div className=\"card-content\">\r\n            <textarea required className=\"textarea\" value={inputText} onChange={e => setInputText(e.target.value)} placeholder=\"Comment on this post\" />\r\n            <button disabled={!inputText} onClick={handlePost} className=\"button is-primary\" style={{ marginTop: \"0.5rem\" }}>Comment</button>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default CommentPostBox","import React, { useState, useCallback, useEffect, useContext } from 'react'\r\nimport axios from 'axios'\r\nimport Linkify from 'react-linkify'\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nimport useStandardError from '../hooks/useStandardError'\r\n\r\nimport UserContext from '../UserContext'\r\n\r\nconst Comment = props => {\r\n    const { commentID, refreshComments, closeModal } = props\r\n    const [userData] = useContext(UserContext)\r\n    const standardError = useStandardError()\r\n    const history = useHistory()\r\n\r\n    const [commentData, setCommentData] = useState(null)\r\n\r\n    const [isEditMode, setIsEditMode] = useState(false)\r\n    const [editInput, setEditInput] = useState(\"\")\r\n\r\n    const chaseUserProfile = () => {\r\n        if (closeModal)\r\n            closeModal()\r\n\r\n        history.push(`/p/${commentData.username}`)\r\n    }\r\n\r\n    const refreshComment = useCallback(() => {\r\n        axios.get(`/api/comments`,\r\n            { params: { CommentID: commentID } })\r\n            .then(res => {\r\n                setCommentData(res.data)\r\n            })\r\n            .catch(standardError)\r\n    }, [commentID, standardError])\r\n\r\n    const cancelEdit = () => {\r\n        setIsEditMode(false)\r\n        setEditInput(\"\")\r\n    }\r\n\r\n    const saveEdit = () => {\r\n        axios.patch(`/api/comments`,\r\n            { CommentID: commentID, Comment: editInput })\r\n            .then(() => {\r\n                refreshComment()\r\n                cancelEdit()\r\n            })\r\n            .catch(standardError)\r\n    }\r\n\r\n    const startEdit = () => {\r\n        const text = commentData && (commentData.comment ?? \"\")\r\n        setEditInput(text)\r\n        setIsEditMode(true)\r\n    }\r\n\r\n    const deleteComment = () => {\r\n        if (window.confirm(\"Are you sure you would like to delete this comment?\")) {\r\n            axios.delete(`/api/comments`,\r\n                { data: { CommentID: commentID } })\r\n                .then(() => {\r\n                    refreshComments()\r\n                })\r\n                .catch(standardError)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (!commentData)\r\n            refreshComment()\r\n    }, [commentData, refreshComment])\r\n\r\n    return <>\r\n        {commentData ?\r\n            <div className=\"card\" style={{ margin: \"1rem auto\", overflowX: \"auto\" }}>\r\n                {(userData.userID === commentData.userID || userData.access === \"Admin\") &&\r\n                    <div style={{ position: \"absolute\", top: \"0.25rem\", right: \"0.25rem\", fontSize: \"0.7rem\" }}>\r\n                        {isEditMode ?\r\n                            <div style={{ display: \"flex\", justifyContent: \"space-between\" }}>\r\n                                <div className=\"LinkButton\" onClick={cancelEdit}>Cancel</div>\r\n                                <div style={{ width: \"0.5rem\" }}></div>\r\n                                <div className=\"LinkButton\" onClick={saveEdit} style={{ fontWeight: 700 }}>Save</div>\r\n                            </div>\r\n                            :\r\n                            <div className=\"LinkButton\" onClick={startEdit}>Edit</div>\r\n                        }\r\n                    </div>\r\n                }\r\n                <div className=\"card-content\">\r\n                    <div style={{ whiteSpace: \"pre-wrap\" }}>\r\n                        {isEditMode ?\r\n                            <>\r\n                                <div className=\"LinkButton-Danger\" onClick={deleteComment} style={{ position: \"absolute\", top: \"0.25rem\", left: \"0.25rem\", fontSize: \"0.7rem\" }}>Delete</div>\r\n                                <textarea onChange={e => setEditInput(e.target.value)} value={editInput} className=\"textarea\" />\r\n                            </>\r\n                            :\r\n                            <Linkify>\r\n                                {`${commentData.comment}`}\r\n                            </Linkify>\r\n                        }\r\n\r\n                    </div>\r\n                </div>\r\n                <div className=\"card-footer\" style={{ justifyContent: \"space-between\", fontSize: \"0.7rem\", color: \"gray\", padding: \"1rem\" }}>\r\n                    <div>\r\n                        <div>{`${commentData.date}${commentData.isEdited ? \" (Edited)\" : \"\"}`}</div>\r\n                        <div className=\"LinkButton\" onClick={chaseUserProfile}>{`${commentData.username}`}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            :\r\n            <div className=\"card\" style={{ margin: \"1rem auto\" }}>\r\n                <div className=\"card-content\">\r\n                    <progress className=\"progress is-small is-light\" max=\"100\"></progress>\r\n                </div>\r\n            </div>\r\n        }\r\n    </>\r\n}\r\n\r\nexport default Comment","import React, { useContext, useState, useEffect, useCallback } from 'react'\r\nimport axios from 'axios'\r\n\r\nimport useStandardError from '../hooks/useStandardError'\r\n\r\nimport UserContext from '../UserContext'\r\n\r\nimport Post from '../components/Post'\r\nimport CommentPostBox from '../components/CommentPostBox'\r\nimport Comment from '../components/Comment'\r\n\r\nconst ExpandedPost = props => {\r\n    const { postID, onPostDelete, closeModal } = props\r\n    const [userData] = useContext(UserContext)\r\n    const standardError = useStandardError()\r\n\r\n    const [commentIDs, setCommentIDs] = useState(null)\r\n\r\n    const refreshComments = useCallback(() => {\r\n        if (postID === null)\r\n            return\r\n\r\n        axios.get(`/api/comments/list`,\r\n            { params: { PostID: Number(postID) } })\r\n            .then(res => {\r\n                setCommentIDs(res.data)\r\n            })\r\n            .catch(standardError)\r\n    }, [postID, standardError])\r\n\r\n    useEffect(() => {\r\n        if (!commentIDs)\r\n            refreshComments()\r\n    }, [commentIDs, refreshComments])\r\n\r\n    return <div style={{ overflowX: \"hidden\" }}>\r\n        <Post\r\n            postID={postID}\r\n            isExpanded\r\n            onDelete={onPostDelete}\r\n            closeModal={closeModal}\r\n        />\r\n        {userData.isLoggedIn &&\r\n            <CommentPostBox\r\n                postID={postID}\r\n                refreshComments={refreshComments}\r\n            />}\r\n        {commentIDs && commentIDs.length > 0 &&\r\n            <div style={{ width: \"40rem\", margin: \"1rem auto\", fontWeight: 600, color: \"gray\", paddingLeft: \"2rem\" }} >Comments</div>\r\n        }\r\n        {commentIDs &&\r\n            commentIDs.map(commentID => <Comment\r\n                key={commentID}\r\n                commentID={commentID}\r\n                refreshComments={refreshComments}\r\n                closeModal={closeModal}\r\n            />)\r\n        }\r\n    </div>\r\n}\r\n\r\nexport default ExpandedPost","import React from 'react'\r\nimport Modal from 'react-modal'\r\n\r\nimport ExpandedPost from '../components/ExpandedPost'\r\n\r\nModal.setAppElement('#root');\r\n\r\nconst PostModal = props => {\r\n    const { isOpen, closeModal, postID } = props\r\n\r\n    const onPostDelete = () => {\r\n        closeModal()\r\n\r\n        if (props.refresh)\r\n            props.refresh()\r\n    }\r\n\r\n    return <Modal\r\n        isOpen={isOpen}\r\n        onRequestClose={closeModal}\r\n        style={{\r\n            content: {\r\n                padding: \"1rem 0 1rem 0\",\r\n                maxWidth: \"60rem\",\r\n                margin: \"auto\",\r\n                top: \"0.5rem\",\r\n                bottom: \"0.5rem\",\r\n                left: \"1.75rem\",\r\n                right: \"1.75rem\"\r\n            },\r\n            overlay: {\r\n                zIndex: 35,\r\n                backgroundColor: \"rgba(128, 128, 128, 0.7)\"\r\n            }\r\n        }}\r\n    >\r\n        <div className=\"container\">\r\n            <ExpandedPost\r\n                postID={postID}\r\n                onPostDelete={onPostDelete}\r\n                closeModal={closeModal}\r\n            />\r\n        </div>\r\n    </Modal>\r\n}\r\n\r\nexport default PostModal","import React, { useEffect, useState, useContext, useCallback, useRef } from 'react'\r\nimport axios from 'axios'\r\nimport noScroll from 'no-scroll'\r\n\r\nimport useStandardError from '../hooks/useStandardError'\r\n\r\nimport UserContext from '../UserContext'\r\n\r\nimport PostBox from '../components/PostBox'\r\nimport Post from '../components/Post'\r\nimport PostModal from '../components/PostModal'\r\n\r\nconst Home = props => {\r\n    const [userData] = useContext(UserContext)\r\n    const standardError = useStandardError()\r\n\r\n    const [postIDs, setPostIDs] = useState(null)\r\n\r\n    const [isPostModalVisible, setIsPostModalVisible] = useState(false)\r\n    const [selectedPostID, setSelectedPostID] = useState(null)\r\n    const [refreshIndex, setRefreshIndex] = useState(null)\r\n\r\n    const getPostIDs = useRef()\r\n    const isFetching = useRef(false)\r\n    getPostIDs.current = () => { return postIDs }\r\n\r\n    const refreshPosts = useCallback(() => {\r\n        axios.get(`/api/home/posts`,\r\n            { params: { LastID: null } })\r\n            .then(res => setPostIDs(res.data))\r\n            .catch(standardError)\r\n    }, [standardError])\r\n\r\n    const getMorePosts = useCallback(() => {\r\n        const posts = getPostIDs.current()\r\n\r\n        if (!posts || posts.length < 1)\r\n            return\r\n\r\n        const lastID = posts[posts.length - 1]\r\n\r\n        if (lastID <= 1)\r\n            return\r\n\r\n        isFetching.current = true\r\n        axios.get(`/api/home/posts`,\r\n            { params: { lastID } })\r\n            .then(res => setPostIDs([...postIDs, ...res.data]))\r\n            .catch(standardError)\r\n            .finally(() => isFetching.current = false)\r\n    }, [postIDs, standardError])\r\n\r\n    const closePostModal = () => {\r\n        setIsPostModalVisible(false)\r\n        setRefreshIndex(selectedPostID)\r\n        setSelectedPostID(null)\r\n        window.history.pushState(null, null, '/')\r\n    }\r\n\r\n    const openPostModal = postID => {\r\n        setSelectedPostID(postID)\r\n        setIsPostModalVisible(true)\r\n        window.history.pushState(null, null, `/wh/${postID}`)\r\n    }\r\n\r\n    const handleScroll = useCallback(e => {\r\n        if (!isFetching.current && window.innerHeight + document.documentElement.scrollTop + 200 >= document.documentElement.offsetHeight)\r\n            getMorePosts()\r\n    }, [getMorePosts])\r\n\r\n    useEffect(() => {\r\n        if (!postIDs)\r\n            refreshPosts()\r\n    }, [postIDs, refreshPosts])\r\n\r\n    useEffect(() => {\r\n        window.addEventListener('scroll', handleScroll)\r\n        return () => window.removeEventListener('scroll', handleScroll)\r\n    }, [handleScroll])\r\n\r\n    useEffect(() => { // Trigger infinite scroll if not enough height for a scrollbar\r\n        if (postIDs && postIDs.length > 0 && window.innerHeight > document.documentElement.offsetHeight)\r\n            handleScroll()\r\n    }, [postIDs, handleScroll])\r\n\r\n    useEffect(() => {\r\n        if (isPostModalVisible)\r\n            noScroll.on()\r\n        else\r\n            noScroll.off()\r\n\r\n        return () => noScroll.off()\r\n    }, [isPostModalVisible])\r\n\r\n    return <>\r\n        <div className=\"container\">\r\n            {userData.isLoggedIn &&\r\n                <PostBox refreshPosts={refreshPosts} />\r\n            }\r\n            {postIDs &&\r\n                postIDs.map(postID => <Post\r\n                    key={postID}\r\n                    postID={postID}\r\n                    expandPost={openPostModal}\r\n                    refreshIndex={refreshIndex}\r\n                    setRefreshIndex={setRefreshIndex}\r\n                />)\r\n            }\r\n        </div>\r\n        <PostModal\r\n            isOpen={isPostModalVisible}\r\n            closeModal={closePostModal}\r\n            postID={selectedPostID}\r\n            refresh={refreshPosts}\r\n        />\r\n    </>\r\n}\r\n\r\nexport default Home","import React from 'react'\r\nimport { useParams, useHistory } from 'react-router-dom'\r\n\r\nimport ExpandedPost from '../components/ExpandedPost'\r\n\r\nconst PostPage = props => {\r\n    const history = useHistory()\r\n    const { postID } = useParams()\r\n\r\n    const postDeleted = () => {\r\n        history.push(\"/\")\r\n    }\r\n\r\n    return <div className=\"container\">\r\n        <ExpandedPost postID={postID} onPostDelete={postDeleted} />\r\n    </div>\r\n}\r\n\r\nexport default PostPage","import React, { useEffect, useState, useCallback } from 'react'\r\nimport { useParams } from 'react-router-dom'\r\nimport axios from 'axios'\r\nimport noScroll from 'no-scroll'\r\n\r\nimport useStandardError from '../hooks/useStandardError'\r\n\r\nimport Post from '../components/Post'\r\nimport PostModal from '../components/PostModal'\r\n\r\nconst Profile = props => {\r\n    const standardError = useStandardError()\r\n\r\n    const { username } = useParams()\r\n\r\n    const [profileData, setProfileData] = useState(null)\r\n    const [postIDs, setPostIDs] = useState(null)\r\n\r\n    const [isPostModalVisible, setIsPostModalVisible] = useState(false)\r\n    const [selectedPostID, setSelectedPostID] = useState(null)\r\n    const [refreshIndex, setRefreshIndex] = useState(null)\r\n\r\n    const refreshPosts = useCallback(() => {\r\n        axios.get(`/api/profile/posts`,\r\n            { params: { UserID: profileData.userID } })\r\n            .then(res => setPostIDs(res.data))\r\n            .catch(standardError)\r\n    }, [profileData, standardError])\r\n\r\n    const closePostModal = () => {\r\n        setIsPostModalVisible(false)\r\n        setRefreshIndex(selectedPostID)\r\n        setSelectedPostID(null)\r\n        window.history.pushState(null, null, `/p/${username}`)\r\n    }\r\n\r\n    const openPostModal = postID => {\r\n        setSelectedPostID(postID)\r\n        setIsPostModalVisible(true)\r\n        window.history.pushState(null, null, `/wh/${postID}`)\r\n    }\r\n\r\n    useEffect(() => {\r\n        axios.get(`/api/profile/user`,\r\n            { params: { Username: username } })\r\n            .then(res => setProfileData(res.data))\r\n            .catch(standardError)\r\n    }, [username, standardError])\r\n\r\n    useEffect(() => {\r\n        if (profileData) {\r\n            refreshPosts()\r\n        }\r\n    }, [profileData, refreshPosts])\r\n\r\n    useEffect(() => {\r\n        if (isPostModalVisible)\r\n            noScroll.on()\r\n        else\r\n            noScroll.off()\r\n\r\n        return () => noScroll.off()\r\n    }, [isPostModalVisible])\r\n\r\n    return <>\r\n        <div className=\"container\">\r\n            {profileData &&\r\n                <>\r\n                    <h5 style={{ textAlign: \"center\" }} className=\"title\">{`${profileData.username}'s Posts`}</h5>\r\n                    <>\r\n                        {profileData.access !== \"User\" &&\r\n                            <h5 style={{ textAlign: \"center\" }} className=\"subtitle\">{profileData.access}</h5>\r\n                        }\r\n                    </>\r\n                </>\r\n            }\r\n            {postIDs &&\r\n                postIDs.map(postID => <Post\r\n                    key={postID}\r\n                    postID={postID}\r\n                    expandPost={openPostModal}\r\n                    refreshIndex={refreshIndex}\r\n                    setRefreshIndex={setRefreshIndex}\r\n                    isProfile\r\n                />)\r\n            }\r\n        </div>\r\n        <PostModal\r\n            isOpen={isPostModalVisible}\r\n            closeModal={closePostModal}\r\n            postID={selectedPostID}\r\n            refresh={refreshPosts}\r\n        />\r\n    </>\r\n}\r\n\r\nexport default Profile","import React, { useState, useContext } from 'react'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faEye, faEyeSlash } from '@fortawesome/free-solid-svg-icons'\r\nimport { toast } from 'react-toastify'\r\nimport axios from 'axios'\r\n\r\nimport useStandardError from '../hooks/useStandardError'\r\n\r\nimport UserContext from '../UserContext'\r\n\r\nconst Settings = props => {\r\n    const standardError = useStandardError()\r\n    const [userData] = useContext(UserContext)\r\n\r\n    const [currentPassword, setCurrentPassword] = useState(\"\")\r\n    const [newPassword, setNewPassword] = useState(\"\")\r\n    const [confirmPassword, setConfirmPassword] = useState(\"\")\r\n\r\n    const [isCurrentPasswordVisible, setIsCurrentPasswordVisible] = useState(false)\r\n    const [isNewPasswordVisible, setIsNewPasswordVisible] = useState(false)\r\n    const [isConfirmPasswordVisible, setIsConfirmPasswordVisible] = useState(false)\r\n\r\n    const handleSubmit = e => {\r\n        e.preventDefault()\r\n\r\n        axios.patch(`/api/settings/password`,\r\n            { Current: currentPassword, New: newPassword, Confirm: confirmPassword })\r\n            .then(() => {\r\n                toast.info(\"Password updated\")\r\n                setCurrentPassword(\"\")\r\n                setNewPassword(\"\")\r\n                setConfirmPassword(\"\")\r\n            })\r\n            .catch(standardError)\r\n    }\r\n\r\n    return <>\r\n        {userData.isLoggedIn ?\r\n            <div className=\"container\">\r\n                <div className=\"card\">\r\n                    <div className=\"card-title\">\r\n                        <h1>Update Password</h1>\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                        <form onSubmit={handleSubmit}>\r\n                            <label htmlFor=\"current-password\" className=\"label\">Current Password</label>\r\n                            <div className=\"field has-addons\">\r\n                                <p className=\"control is-expanded\">\r\n                                    <input value={currentPassword} onChange={e => setCurrentPassword(e.target.value)} className=\"input\" name=\"current-password\" type={isCurrentPasswordVisible ? \"input\" : \"password\"} placeholder=\"Current Password\" required />\r\n                                </p>\r\n                                <div className=\"control\">\r\n                                    <div onClick={() => setIsCurrentPasswordVisible(!isCurrentPasswordVisible)} className=\"button\" style={{ width: \"3rem\" }}>\r\n                                        <FontAwesomeIcon icon={isCurrentPasswordVisible ? faEye : faEyeSlash} />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <label htmlFor=\"new-password\" className=\"label\">New Password</label>\r\n                            <div className=\"field has-addons\">\r\n                                <p className=\"control is-expanded\">\r\n                                    <input value={newPassword} onChange={e => setNewPassword(e.target.value)} className=\"input\" name=\"new-password\" type={isNewPasswordVisible ? \"input\" : \"password\"} placeholder=\"New Password\" required />\r\n                                </p>\r\n                                <div className=\"control\">\r\n                                    <div onClick={() => setIsNewPasswordVisible(!isNewPasswordVisible)} className=\"button\" style={{ width: \"3rem\" }}>\r\n                                        <FontAwesomeIcon icon={isNewPasswordVisible ? faEye : faEyeSlash} />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <label htmlFor=\"confirm-password\" className=\"label\">Confirm Password</label>\r\n                            <div className=\"field has-addons\">\r\n                                <p className=\"control is-expanded\">\r\n                                    <input value={confirmPassword} onChange={e => setConfirmPassword(e.target.value)} className=\"input\" name=\"confirm-password\" type={isConfirmPasswordVisible ? \"input\" : \"password\"} placeholder=\"Confirm Password\" required />\r\n                                </p>\r\n                                <div className=\"control\">\r\n                                    <div onClick={() => setIsConfirmPasswordVisible(!isConfirmPasswordVisible)} className=\"button\" style={{ width: \"3rem\" }}>\r\n                                        <FontAwesomeIcon icon={isConfirmPasswordVisible ? faEye : faEyeSlash} />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"field\">\r\n                                <p className=\"control\">\r\n                                    <button type=\"submit\" className=\"button is-primary\">Update</button>\r\n                                </p>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            :\r\n            <div className=\"container\">\r\n                Please log in or create an account to view this page.\r\n        </div>}\r\n    </>\r\n}\r\n\r\nexport default Settings","import React, { useState, useContext } from 'react'\r\nimport axios from 'axios'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faUser, faLock, faEye, faEyeSlash } from '@fortawesome/free-solid-svg-icons'\r\nimport { Redirect } from 'react-router-dom'\r\n\r\nimport useStandardError from '../hooks/useStandardError'\r\n\r\nimport UserContext from '../UserContext'\r\n\r\nimport './css/LoginRegister.css'\r\n\r\nconst Register = props => {\r\n    const standardError = useStandardError()\r\n    const [userData, setToken] = useContext(UserContext)\r\n\r\n    const [isPasswordVisible, setIsPasswordVisible] = useState(false)\r\n    const [isConfirmPasswordVisible, setIsConfirmPasswordVisible] = useState(false)\r\n    const [username, setUsername] = useState(\"\")\r\n    const [password, setPassword] = useState(\"\")\r\n    const [confirmPassword, setConfirmPassword] = useState(\"\")\r\n\r\n    const handleSubmit = e => {\r\n        e.preventDefault();\r\n\r\n        axios.post(`/api/register`, { username, password, Confirm: confirmPassword })\r\n            .then(res => {\r\n                setToken(res.data.jwt)\r\n            })\r\n            .catch(standardError)\r\n    }\r\n\r\n    if (userData.isLoggedIn)\r\n        return <Redirect to=\"/\" />\r\n    else\r\n        return (\r\n            <div className=\"container\">\r\n                <div className=\"card\">\r\n                    <div className=\"card-title\">\r\n                        <h1>Registration</h1>\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                        <form onSubmit={handleSubmit}>\r\n                            <label htmlFor=\"username\" className=\"label\">Username</label>\r\n                            <div className=\"field\">\r\n                                <p className=\"control has-icons-left\">\r\n                                    <input value={username} onChange={e => setUsername(e.target.value)} className=\"input\" type=\"text\" name=\"username\" placeholder=\"Username\" autoFocus required />\r\n                                    <span className=\"icon is-small is-left\">\r\n                                        <FontAwesomeIcon icon={faUser} />\r\n                                    </span>\r\n                                </p>\r\n                            </div>\r\n                            <label htmlFor=\"password\" className=\"label\">Password</label>\r\n                            <div className=\"field has-addons\">\r\n                                <p className=\"control is-expanded has-icons-left\">\r\n                                    <input value={password} onChange={e => setPassword(e.target.value)} className=\"input\" name=\"password\" type={isPasswordVisible ? \"input\" : \"password\"} placeholder=\"Password\" required />\r\n                                    <span className=\"icon is-small is-left\">\r\n                                        <FontAwesomeIcon icon={faLock} />\r\n                                    </span>\r\n                                </p>\r\n                                <div className=\"control\">\r\n                                    <div onClick={() => setIsPasswordVisible(!isPasswordVisible)} className=\"button\" style={{ width: \"3rem\" }}>\r\n                                        <FontAwesomeIcon icon={isPasswordVisible ? faEye : faEyeSlash} />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <label htmlFor=\"confirm-password\" className=\"label\">Confirm Password</label>\r\n                            <div className=\"field has-addons\">\r\n                                <p className=\"control is-expanded has-icons-left\">\r\n                                    <input value={confirmPassword} onChange={e => setConfirmPassword(e.target.value)} className=\"input\" name=\"confirm-password\" type={isConfirmPasswordVisible ? \"input\" : \"password\"} placeholder=\"Confirm Password\" required />\r\n                                    <span className=\"icon is-small is-left\">\r\n                                        <FontAwesomeIcon icon={faLock} />\r\n                                    </span>\r\n                                </p>\r\n                                <div className=\"control\">\r\n                                    <div onClick={() => setIsConfirmPasswordVisible(!isConfirmPasswordVisible)} className=\"button\" style={{ width: \"3rem\" }}>\r\n                                        <FontAwesomeIcon icon={isConfirmPasswordVisible ? faEye : faEyeSlash} />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"field\">\r\n                                <p className=\"control\">\r\n                                    <button type=\"submit\" className=\"button is-primary\">Register</button>\r\n                                </p>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n}\r\n\r\nexport default Register","import React, { useState, useContext } from 'react'\r\nimport axios from 'axios'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faUser, faLock, faEye, faEyeSlash } from '@fortawesome/free-solid-svg-icons'\r\nimport { Redirect } from 'react-router-dom'\r\n\r\nimport useStandardError from '../hooks/useStandardError'\r\n\r\nimport UserContext from '../UserContext'\r\n\r\nconst Login = props => {\r\n    const [userData, setToken] = useContext(UserContext)\r\n    const standardError = useStandardError()\r\n    \r\n    const [isPasswordVisible, setIsPasswordVisible] = useState(false)\r\n    const [username, setUsername] = useState(\"\")\r\n    const [password, setPassword] = useState(\"\")\r\n\r\n    const handleSubmit = e => {\r\n        e.preventDefault();\r\n\r\n        axios.post(`/api/login`, { username, password })\r\n            .then(res => {\r\n                setToken(res.data.jwt)\r\n            })\r\n            .catch(standardError)\r\n    }\r\n\r\n    if (userData.isLoggedIn)\r\n        return <Redirect to=\"/\" />\r\n    else\r\n        return (\r\n            <div className=\"container\">\r\n                <div className=\"card\">\r\n                    <div className=\"card-title\">\r\n                        <h1>Login</h1>\r\n                    </div>\r\n                    <div className=\"card-body\">\r\n                        <form onSubmit={handleSubmit}>\r\n                            <label htmlFor=\"username\" className=\"label\">Username</label>\r\n                            <div className=\"field\">\r\n                                <p className=\"control has-icons-left\">\r\n                                    <input value={username} onChange={e => setUsername(e.target.value)} className=\"input\" type=\"text\" name=\"username\" placeholder=\"Username\" autoFocus required />\r\n                                    <span className=\"icon is-small is-left\">\r\n                                        <FontAwesomeIcon icon={faUser} />\r\n                                    </span>\r\n                                </p>\r\n                            </div>\r\n                            <label htmlFor=\"password\" className=\"label\">Password</label>\r\n                            <div className=\"field has-addons\">\r\n                                <p className=\"control is-expanded has-icons-left\">\r\n                                    <input value={password} onChange={e => setPassword(e.target.value)} className=\"input\" name=\"password\" type={isPasswordVisible ? \"input\" : \"password\"} placeholder=\"Password\" required />\r\n                                    <span className=\"icon is-small is-left\">\r\n                                        <FontAwesomeIcon icon={faLock} />\r\n                                    </span>\r\n                                </p>\r\n                                <div className=\"control\">\r\n                                    <div onClick={() => setIsPasswordVisible(!isPasswordVisible)} className=\"button\" style={{ width: \"3rem\" }}>\r\n                                        <FontAwesomeIcon icon={isPasswordVisible ? faEye : faEyeSlash} />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"field\">\r\n                                <p className=\"control\">\r\n                                    <button type=\"submit\" className=\"button is-primary\">Log In</button>\r\n                                </p>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n}\r\n\r\nexport default Login","import React, { useEffect, useContext } from 'react'\r\nimport { Redirect } from 'react-router-dom'\r\nimport { toast } from 'react-toastify'\r\n\r\nimport UserContext from '../UserContext'\r\n\r\nconst Logout = props => {\r\n    const [userData, setToken] = useContext(UserContext)\r\n\r\n    useEffect(() => {\r\n        if (userData.token) {\r\n            setToken(null)\r\n            toast.info(\"You have been logged out\")\r\n        }\r\n    }, [userData.token, setToken])\r\n\r\n    return <>\r\n        {userData.token ?\r\n            <Redirect to=\"/\" />\r\n            :\r\n            <div>\r\n                Logging out...\r\n            </div>\r\n        }\r\n    </>\r\n}\r\n\r\nexport default Logout","import React from 'react'\r\n\r\nconst Error404 = props =>\r\n    <div className=\"container\">\r\n        <h1 className=\"title\">\r\n            404\r\n      </h1>\r\n        <p className=\"subtitle\">\r\n            Nothing was found at this location\r\n      </p>\r\n    </div>\r\n\r\nexport default Error404","import React, { useContext, useState, useEffect, useCallback } from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport UserContext from '../UserContext'\r\n\r\nimport './css/NavBar.css'\r\n\r\nconst NavBar = () => {\r\n    const [userData] = useContext(UserContext)\r\n    const [isUsernameDropdownActive, setIsUsernameDropdownActive] = useState(false)\r\n\r\n    const handleClick = useCallback(e => {\r\n        if (isUsernameDropdownActive)\r\n            setIsUsernameDropdownActive(false)\r\n    }, [isUsernameDropdownActive])\r\n\r\n    useEffect(() => {\r\n        window.addEventListener('click', handleClick)\r\n        return () => window.removeEventListener('click', handleClick)\r\n    }, [handleClick])\r\n\r\n    return (\r\n        <nav style={{ marginBottom: \"1rem\" }} className=\"navbar is-dark\" role=\"navigation\" aria-label=\"main navigation\">\r\n            <div className=\"navbar-brand\">\r\n                <Link className=\"navbar-item NavBar-brand\" to=\"/\">Word Hole</Link>\r\n                <div onClick={()=>setIsUsernameDropdownActive(!isUsernameDropdownActive)} role=\"button\" className={`${isUsernameDropdownActive ? \"is-active\" : \"\"} navbar-burger`} aria-label=\"menu\" aria-expanded=\"false\">\r\n                    <span aria-hidden=\"true\"></span>\r\n                    <span aria-hidden=\"true\"></span>\r\n                    <span aria-hidden=\"true\"></span>\r\n                </div>\r\n            </div>\r\n\r\n            <div className={`${isUsernameDropdownActive ? \"is-active\" : \"\"} navbar-menu`}>\r\n                <div className=\"navbar-end\">\r\n                    {userData.isLoggedIn ?\r\n                        <div id={\"navbar-username-dropdown-button\"} className={`navbar-item has-dropdown ${isUsernameDropdownActive ? \"is-active\" : \"\"}`}>\r\n                            <div className=\"navbar-link\" onClick={() => setIsUsernameDropdownActive(!isUsernameDropdownActive)}>\r\n                                {userData.username}\r\n                            </div>\r\n\r\n                            <div className=\"navbar-dropdown\">\r\n                                <Link className=\"navbar-item\" to={`/p/${userData.username}`}>Profile</Link>\r\n                                <Link className=\"navbar-item\" to={`/settings`}>Settings</Link>\r\n                                <hr className=\"navbar-divider\" />\r\n                                <Link className=\"navbar-item\" to={\"/logout\"}>Log Out</Link>\r\n                            </div>\r\n                        </div>\r\n                        :\r\n                        <div className=\"navbar-item\">\r\n                            <div className=\"buttons\">\r\n                                <Link className=\"button is-dark\" to={\"/register\"}>Register</Link>\r\n                                <Link className=\"button is-primary\" to={\"/login\"}><strong>Log In</strong></Link>\r\n                            </div>\r\n                        </div>\r\n                    }\r\n                </div>\r\n            </div>\r\n        </nav >\r\n    )\r\n}\r\n\r\nexport default NavBar","import React, { useState, useEffect, useCallback } from 'react'\r\nimport axios from 'axios'\r\n\r\nconst WaitOnWake = props => {\r\n    const [isVisible, setIsVisible] = useState(false)\r\n    const { setIsServerAwake } = props\r\n\r\n    useEffect(() => {\r\n        if (!isVisible)\r\n            setTimeout(() => setIsVisible(true), 700)\r\n    }, [isVisible])\r\n\r\n    const pingServer = useCallback(()=> {\r\n        axios.get(`/api/common/hello`)\r\n            .then(() => setIsServerAwake(true))\r\n            .catch(() => setTimeout(pingServer, 500))\r\n    }, [setIsServerAwake])\r\n\r\n    useEffect(() => pingServer(), [pingServer])\r\n\r\n    return <>\r\n        {isVisible ?\r\n            <div className=\"container\">\r\n                <h2 className=\"subtitle\" style={{ marginTop: \"2rem\" }}>Waking up the server...</h2>\r\n                <progress className=\"progress is-small is-primary\" max=\"100\"></progress>\r\n            </div>\r\n            :\r\n            <></>\r\n        }\r\n    </>\r\n}\r\n\r\nexport default WaitOnWake","import React, { useState } from 'react'\r\nimport { BrowserRouter, Switch, Route } from 'react-router-dom'\r\nimport { toast } from 'react-toastify'\r\nimport { UserProvider } from './UserContext'\r\n\r\nimport Home from './pages/Home'\r\nimport PostPage from './pages/PostPage'\r\nimport Profile from './pages/Profile'\r\nimport Settings from './pages/Settings'\r\nimport Register from './pages/Register'\r\nimport Login from './pages/Login'\r\nimport Logout from './pages/Logout'\r\nimport Error404 from './pages/Error404'\r\n\r\nimport NavBar from './components/NavBar'\r\nimport WaitOnWake from './components/WaitOnWake'\r\n\r\ntoast.configure({\r\n    hideProgressBar: true,\r\n    newestOnTop: true,\r\n    autoClose: 3000\r\n})\r\n\r\nconst App = () => {\r\n    const [isServerAwake, setIsServerAwake] = useState(false)\r\n\r\n    return <>\r\n        {isServerAwake ?\r\n            <BrowserRouter>\r\n                <UserProvider>\r\n                    <NavBar />\r\n                    <Switch>\r\n                        <Route path=\"/\" exact component={Home} />\r\n                        <Route path=\"/wh/:postID\" exact component={PostPage} />\r\n                        <Route path=\"/p/:username\" exact component={Profile} />\r\n                        <Route path=\"/settings\" exact component={Settings} />\r\n                        <Route path=\"/register\" exact component={Register} />\r\n                        <Route path=\"/login\" exact component={Login} />\r\n                        <Route path=\"/logout\" exact component={Logout} />\r\n                        <Route component={Error404} />\r\n                    </Switch>\r\n                </UserProvider>\r\n            </BrowserRouter>\r\n            :\r\n            <WaitOnWake setIsServerAwake={setIsServerAwake} />\r\n        }\r\n    </>\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport axios from 'axios'\r\n\r\nimport 'bulma/css/bulma.css'\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\naxios.defaults.baseURL = process.env.REACT_APP_API_URL\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}